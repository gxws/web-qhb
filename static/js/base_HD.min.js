!function(a,b){var c=($(a),document),d=$(c),e=location,f=a.WS||(a.WS={}),g={},h=f.base||(f.base={});g["public"]=function(){$(".J_focus").focus()},h.confirm=function(a,b,c){var d=$(".modal."+a),e=template.compile(c);d.html(e(b)).addClass("show");var f=d.find(".btn");f.size()>1?f.on("keydown",function(a){var b=$(this),c=b.index(),d=0==c?39:37;return a.keyCode!=d&&13!=a.keyCode?!1:void 0}):f.on("keydown",function(a){return 13!=a.keyCode?!1:void 0}),f.eq(0).focus();var g=d.find(".J_close"),h=$(".J_qing");g.size()&&g.on("click",function(){d.removeClass("show"),h.size()&&$(".J_qing").focus()})},g.p142=function(){var a=0,b=h.exchangeData;h.node=b&&3==b.success?'<div class="pa sptitle tc">{{title}}</div><div class="pa success-info tc">已经进入您的口袋啦！体验时间{{perception}}天。</div><div class="pa btn_bx tc"><a href="{{spurl}}" class="btn btn-md"><span>去观看节目</span></a><a href="{{exchangeurl}}" class="btn btn-md"><span>继续兑换红包</span></a></div>':b&&4==b.success?'<div class="pa error">{{msg}}<p>若有疑问请拨打客服热线96335咨询。</p></div><div class="pa btn_bx tc"><a href="{{homeurl}}" class="btn btn-sm"><span>确定</span></a></div>':"",h.css=b&&3==b.success?"success":b&&4==b.success?"fail":"",b&&b.success&&h.confirm(h.css,h.exchangeData,h.node),d.on("click",".J_qing",function(){var a=$(this).attr("data-ajax");$.getJSON(a,function(a){var b=a.success,c=1==b?"experience":2==b?"money":3==b?"success":4==b?"fail":"miss",d={},e="";1==b?(d={date:a.date,url:a.exchangeurl},e='<div class="pa date">（请于{{date}}前使用）</div><div class="pa btn_bx tc"><a href={{url}} class="btn btn-sm"><span>立即兑换</span></a></div>'):2==b?(d={money:a.money,date:a.date,url:a.exchangeurl},e='<div class="pa text">{{money}}</div><div class="pa date money">（请于{{date}}前使用）</div><div class="pa btn_bx tc"><a href={{url}} class="btn btn-sm"><span>立即兑换</span></a></div>'):(d={url:a.exiturl},e='<div class="pa btn_bx tc"><a href="javascript:;" class="btn btn-lg J_close"><span>没关系，再领一次</span></a><a href={{url}} class="btn btn-sm"><span>黯然离开</span></a></div>'),h.confirm(c,d,e)})}).on("keydown","#recommend",function(b){function c(){i.removeClass("middle").addClass("left"),j.removeClass("right").addClass("middle"),k.removeClass("left").addClass("right"),f(1)}function d(){i.removeClass("middle").addClass("right"),j.removeClass("right").addClass("left"),k.removeClass("left").addClass("middle"),f(-1)}function f(b){m.eq(a).removeClass("active"),a+=b,0>a&&(a=2),a>2&&(a=0),m.eq(a).addClass("active")}var g=$("#recommend_bx"),h=(g.find(".img_bx"),b.keyCode),i=g.find(".middle"),j=g.find(".right"),k=g.find(".left"),l=(i.index(),$(".roll_box")),m=l.find("span");return 39==h?(c(),!1):37==h?(d(),!1):13==h?(e.href=g.find(".middle").attr("data-url"),!1):void 0})},h.Obj=function(a){var b=document.getElementById(a);return b},h.render=function(a,b,c){h.Obj(a).innerHTML=template(b,c)},$.extend(h,$.loader(g))}(window);